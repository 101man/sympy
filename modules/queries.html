<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Query module &mdash; SymPy v0.6.5 documentation</title>
    <link rel="stylesheet" href="../static/default.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.5',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="SymPy v0.6.5 documentation" href="../index.html" />
    <link rel="up" title="SymPy Modules Reference" href="../modules.html" />
    <link rel="next" title="Term rewriting" href="rewriting.html" />
    <link rel="prev" title="Plotting" href="plotting.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="rewriting.html" title="Term rewriting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SymPy v0.6.5 documentation</a> &raquo;</li>
          <li><a href="../modules.html" accesskey="U">SymPy Modules Reference</a> &raquo;</li> 
      </ul>
    </div>  
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  
  <div class="section" id="module-sympy.queries">
<h1>Query module<a class="headerlink" href="#module-sympy.queries" title="Permalink to this headline">¶</a></h1>
<p>Queries are used to ask information about expression. Main method in this
module is ask():</p>
<dl class="staticmethod">
<dt id="sympy.queries.ask">
<!--[sympy.queries.ask]--><em class="property">
static </em><tt class="descclassname">queries.</tt><tt class="descname">ask</tt><big>(</big><em>expr</em>, <em>key</em>, <em>assumptions=True</em><big>)</big><a class="headerlink" href="#sympy.queries.ask" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for inferring properties about objects.</p>
<p>Syntax</p>
<blockquote>
<ul>
<li><p class="first">ask(expression, key)</p>
</li>
<li><p class="first">ask(expression, key, assumptions)</p>
<blockquote>
<p>where expression is any SymPy expression</p>
</blockquote>
</li>
</ul>
</blockquote>
<dl class="docutils">
<dt>Examples</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">even</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">even</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Assume</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">prime</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">)</span> <span class="o">&amp;</span>  <span class="n">Assume</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
</dd>
<dt>Remarks</dt>
<dd>Relations in assumptions are not implemented (yet), so the following
will not give a meaningful result.
#&gt;&gt;&gt; ask(x, positive=True, Assume(x&gt;0))
It is however a work in progress and should be available before
the official release</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="assumptions">
<h1>Assumptions<a class="headerlink" href="#assumptions" title="Permalink to this headline">¶</a></h1>
<p>ask&#8217;s optional second argument should be a boolean
expression involving assumptions about objects in expr. Valid values include:</p>
<blockquote>
<ul class="simple">
<li>Assume(x, Q.integer)</li>
<li>Assume(x, Q.positive)</li>
<li>Assume(x, Q.integer) &amp; Assume(x, Q.positive)</li>
<li>etc.</li>
</ul>
</blockquote>
<p>Q is a class in sympy.queries holding valid assumptions.</p>
<p>See documentation for the logic module for a complete list of valid boolean
expressions.</p>
<p>You can also define global assumptions so you don&#8217;t have to pass that argument
each time to function ask(). This is done calling register_global_assumptions()
from module sympy.assumptions. You can then clear global assumptions with
clean_global_assumptions()</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_assumptions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_assumptions</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="supported-queries">
<h1>Supported queries<a class="headerlink" href="#supported-queries" title="Permalink to this headline">¶</a></h1>
<div class="section" id="bounded">
<h2>bounded<a class="headerlink" href="#bounded" title="Permalink to this headline">¶</a></h2>
<p>Test that a function is bounded with respect to it&#8217;s variables. For example,
sin(x) is a bounded functions, but exp(x) is not.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">bounded</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">bounded</span> <span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">bounded</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">bounded</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="commutative">
<h2>commutative<a class="headerlink" href="#commutative" title="Permalink to this headline">¶</a></h2>
<p>Test that objects are commutative. By default, symbols in SymPy are considered
commutative except otherwise stated.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">commutative</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">commutative</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">commutative</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">commutative</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">commutative</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="complex">
<h2>complex<a class="headerlink" href="#complex" title="Permalink to this headline">¶</a></h2>
<p>Test that expression belongs to the field of complex numbers.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">complex</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">complex</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Assume</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="even">
<h2>even<a class="headerlink" href="#even" title="Permalink to this headline">¶</a></h2>
<p>Test that expression represents an even number, that is, an number that
can be written in the form 2*n, n integer.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">even</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;n&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">even</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="extended-real">
<h2>extended_real<a class="headerlink" href="#extended-real" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression belongs to the field of extended real numbers, that is, real
numbers union {Infinity, -Infinity}.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">oo</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">extended_real</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">extended_real</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">extended_real</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="imaginary">
<h2>imaginary<a class="headerlink" href="#imaginary" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Test that an expression belongs to the field of imaginary numbers, that is,</dt>
<dd>it can be written as x*I, where x is real and I is the imaginary unit.</dd>
</dl>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="o">*</span><span class="n">I</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">imaginary</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">I</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">imaginary</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="infinitesimal">
<h2>infinitesimal<a class="headerlink" href="#infinitesimal" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression is equivalent to an infinitesimal number.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">1</span><span class="o">/</span><span class="n">oo</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">infinitesimal</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">infinitesimal</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">infinitesimal</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">infinitesimal</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">infinitesimal</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Assume</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">bounded</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="integer">
<h2>integer<a class="headerlink" href="#integer" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression belongs to the field of integer numbers.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">even</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="irrational">
<h2>irrational<a class="headerlink" href="#irrational" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression represents an irrational number.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">pi</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">irrational</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">irrational</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">irrational</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">rational</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="rational">
<h2>rational<a class="headerlink" href="#rational" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression represents a rational number.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">Rational</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span> <span class="mf">4</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">rational</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">rational</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">rational</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Assume</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="negative">
<h2>negative<a class="headerlink" href="#negative" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression is less (strict) than zero.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">negative</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">negative</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="section" id="remarks">
<h3>Remarks<a class="headerlink" href="#remarks" title="Permalink to this headline">¶</a></h3>
<p>negative numbers are defined as real numbers that are not zero nor positive, so
complex numbers (with nontrivial imaginary coefficients) will return False
in this ask. The same applies to ask positive.</p>
</div>
</div>
<div class="section" id="positive">
<h2>positive<a class="headerlink" href="#positive" title="Permalink to this headline">¶</a></h2>
<p>Test that a given expression is greater (strict) than zero.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">negative</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="section" id="id1">
<h3>Remarks<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>see Remarks for negative</p>
</div>
</div>
<div class="section" id="prime">
<h2>prime<a class="headerlink" href="#prime" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression represents a prime number.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">13</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">prime</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Remarks: Use sympy.ntheory.isprime for efficiently test numeric values.</p>
</div>
<div class="section" id="real">
<h2>real<a class="headerlink" href="#real" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression belongs to the field of real numbers.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s">&#39;x y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">Assume</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">real</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="odd">
<h2>odd<a class="headerlink" href="#odd" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression represents an odd number.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">odd</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;n&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">2</span><span class="o">*</span><span class="n">n</span> <span class="o">+</span> <span class="mf">1</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">odd</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">integer</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="nonzero">
<h2>nonzero<a class="headerlink" href="#nonzero" title="Permalink to this headline">¶</a></h2>
<p>Test that an expression is not zero.</p>
<p>Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">nonzero</span><span class="p">,</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">positive</span><span class="p">)</span> <span class="o">|</span> <span class="n">Assume</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">negative</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h1>
<p>Each time ask is called, the appropriate Handler for the current key is called. This is
always a subclass of sympy.queries.AskHandler. It&#8217;s classmethods have the name&#8217;s of the classes
it supports. For example, a (simplified) AskHandler for the ask &#8216;positive&#8217; would
look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">AskPositiveHandler</span><span class="p">(</span><span class="n">CommonHandler</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">Mul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># return True if all argument&#39;s in self.expr.args are positive</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ask</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">positive</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">assumptions</span><span class="p">):</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># if all argument&#39;s are positive</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The .Mul() method is called when self.expr is an instance of Mul, the Add method
would be called when self.expr is an instance of Add and so on.</p>
</div>
<div class="section" id="extensibility">
<h1>Extensibility<a class="headerlink" href="#extensibility" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>You can define new queries or support new types by subclassing sympy.queries.AskHandler</dt>
<dd>and registering that handler for a particular key by calling register_handler:</dd>
</dl>
<dl class="staticmethod">
<dt id="sympy.queries.register_handler">
<!--[sympy.queries.register_handler]--><em class="property">
static </em><tt class="descclassname">queries.</tt><tt class="descname">register_handler</tt><big>(</big><em>key</em>, <em>handler</em><big>)</big><a class="headerlink" href="#sympy.queries.register_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a handler in the ask system. key must be a string and handler a
class inheriting from AskHandler.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy.queries.handlers</span> <span class="k">import</span> <span class="n">AskHandler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MersenneHandler</span><span class="p">(</span><span class="n">AskHandler</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c"># Mersenne numbers are in the form 2**n + 1, n integer</span>
<span class="gp">... </span>    <span class="nd">@staticmethod</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">Integer</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">assumptions</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">import</span> <span class="nn">math</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">ask</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">expr</span> <span class="o">+</span> <span class="mf">1</span><span class="p">,</span> <span class="mf">2</span><span class="p">),</span> <span class="s">&#39;integer&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">register_handler</span><span class="p">(</span><span class="s">&#39;mersenne&#39;</span><span class="p">,</span> <span class="n">MersenneHandler</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="mf">7</span><span class="p">,</span> <span class="s">&#39;mersenne&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<p>You can undo this operation by calling remove_handler.</p>
<dl class="staticmethod">
<dt id="sympy.queries.remove_handler">
<!--[sympy.queries.remove_handler]--><em class="property">
static </em><tt class="descclassname">queries.</tt><tt class="descname">remove_handler</tt><big>(</big><em>key</em>, <em>handler</em><big>)</big><a class="headerlink" href="#sympy.queries.remove_handler" title="Permalink to this definition">¶</a></dt>
<dd>Removes a handler from the ask system. Same syntax as register_handler</dd></dl>

<p>You can support new types <a class="footnote-reference" href="#id3" id="id2">[1]</a> by adding a handler to an existing key. In the
following example, we will create a new type MyType and extend the key &#8216;prime&#8217;
to accept this type (and return True)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy.core</span> <span class="k">import</span> <span class="n">Basic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy.queries</span> <span class="k">import</span> <span class="n">register_handler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">sympy.queries.handlers</span> <span class="k">import</span> <span class="n">AskHandler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyType</span><span class="p">(</span><span class="n">Basic</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyAskHandler</span><span class="p">(</span><span class="n">AskHandler</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@staticmethod</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">MyType</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">assumptions</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">MyType</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">register_handler</span><span class="p">(</span><span class="s">&#39;prime&#39;</span><span class="p">,</span> <span class="n">MyAskHandler</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ask</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Q</span><span class="o">.</span><span class="n">prime</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="performance-improvements">
<h1>Performance improvements<a class="headerlink" href="#performance-improvements" title="Permalink to this headline">¶</a></h1>
<p>On queries that involve symbolic coefficients, logical inference is used. Work on
improving satisfiable function (sympy.logic.inference.satisfiable) should result
in notable speed improvements.</p>
<p>Logic inference used in one ask could be used to speed up further queries, and
current system does not take advantage of this. For example, a truth maintenance
system (<a class="reference external" href="http://en.wikipedia.org/wiki/Truth_maintenance_system">http://en.wikipedia.org/wiki/Truth_maintenance_system</a>) could be implemented.</p>
</div>
<div class="section" id="misc">
<h1>Misc<a class="headerlink" href="#misc" title="Permalink to this headline">¶</a></h1>
<p>You can find more examples in the in the form of test under directory sympy/queries/tests/</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>New type must inherit from Basic, otherwise an exception will be raised.
This is a bug and should be fixed.</td></tr>
</tbody>
</table>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../static/sympylogo.png" alt="Logo"/>
            </a></p>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Query module</a></li>
<li><a class="reference external" href="#assumptions">Assumptions</a></li>
<li><a class="reference external" href="#supported-queries">Supported queries</a><ul>
<li><a class="reference external" href="#bounded">bounded</a></li>
<li><a class="reference external" href="#commutative">commutative</a></li>
<li><a class="reference external" href="#complex">complex</a></li>
<li><a class="reference external" href="#even">even</a></li>
<li><a class="reference external" href="#extended-real">extended_real</a></li>
<li><a class="reference external" href="#imaginary">imaginary</a></li>
<li><a class="reference external" href="#infinitesimal">infinitesimal</a></li>
<li><a class="reference external" href="#integer">integer</a></li>
<li><a class="reference external" href="#irrational">irrational</a></li>
<li><a class="reference external" href="#rational">rational</a></li>
<li><a class="reference external" href="#negative">negative</a><ul>
<li><a class="reference external" href="#remarks">Remarks</a></li>
</ul>
</li>
<li><a class="reference external" href="#positive">positive</a><ul>
<li><a class="reference external" href="#id1">Remarks</a></li>
</ul>
</li>
<li><a class="reference external" href="#prime">prime</a></li>
<li><a class="reference external" href="#real">real</a></li>
<li><a class="reference external" href="#odd">odd</a></li>
<li><a class="reference external" href="#nonzero">nonzero</a></li>
</ul>
</li>
<li><a class="reference external" href="#design">Design</a></li>
<li><a class="reference external" href="#extensibility">Extensibility</a></li>
<li><a class="reference external" href="#performance-improvements">Performance improvements</a></li>
<li><a class="reference external" href="#misc">Misc</a></li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="plotting.html" title="previous chapter">Plotting</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="rewriting.html" title="next chapter">Term rewriting</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../sources/modules/queries.txt">Show Source</a></li>
            </ul>
          <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="rewriting.html" title="Term rewriting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SymPy v0.6.5 documentation</a> &raquo;</li>
          <li><a href="../modules.html" accesskey="U">SymPy Modules Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2008, 2009 SymPy Development Team.
      Last updated on Aug 28, 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.5.2.
    </div>
  </body>
</html>